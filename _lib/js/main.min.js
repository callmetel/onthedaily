"use strict";function setVideoSrc(e){var a=sections[e].selector,i=sections[e].video,s=sections[e].loop;a.find(".video--scene").attr("src",i),a.find(".video--loop").attr("src",s)}function updatePageTitle(e){document.title=sections[e].title+" | AetnaCare℠"}function progressBar(e){var a=$navActive.find(".progress--active"),i=$progBar.not(".progress--active"),s=a.parent().parent().data("url"),o=sections[s].duration;progressTL.to(a,o,{x:0}),"play"===e?(progressTL.set(i,{x:"-100%"}),progressTL.play()):"replay"===e?progressTL.restart():"stop"===e?progressTL.progress(1):"pause"===e?(progressTL.pause(),storyTL.pause()):"resume"===e&&(progressTL.resume(),storyTL.resume())}function learnMore(e){var a=$(".section--active").find(".learn-more"),i=a.find(".learn-more__wrapper"),s=$(".section--active").find(".story"),o=$(".section--active").find(".video-overlay");"open"===e?(s.fadeOut("fast"),a.delay(500).fadeIn("fast"),learnTL.to(o,1,{backgroundColor:"rgba(18, 18, 18, .8)"},"-=1.0").fromTo(i,1.5,{y:45},{y:0},"-=0.5"),$skipBtn.css({opacity:0,visibility:"hidden"}),progressBar("stop")):"close"===e&&(a.fadeOut("fast"),learnTL.to(o,1,{backgroundColor:"rgba(18, 18, 18, 0)"}),$skipBtn.css({opacity:1,visibility:"visible"}))}function storyText(e){var a=$(".section--active").find(".story"),i=a.parent(".video-overlay"),s=a.find("h2:first-of-type"),o=a.find("h2:last-of-type");storyTL.to(i,1,{backgroundColor:"rgba(18, 18, 18, .4)"}).fromTo(s,2,{y:70},{y:10},"-=0.7").fromTo(s,1.5,{alpha:0,visibility:"hidden"},{alpha:1,visibility:"visible"},"-=1.5").to(s,1.5,{y:-20},"+=0.7").to(s,1,{alpha:.6},"-=1.0").fromTo(o,2,{y:25},{y:-25},"-=1.7").fromTo(o,1,{alpha:0,visibility:"hidden"},{alpha:1,visibility:"visible"},"-=1.5"),"play"===e?storyTL.play():"restart"===e&&(a.show(),storyTL.play())}function playVideo(e){var a=sections[e].selector,i=a.find(".video--scene"),s=a.find(".video--loop"),o=$currPlaying.parent();setVideoSrc(e),updatePageTitle(e),$currPlaying[0].pause(),$currPlaying.removeClass("video--playing"),o.removeClass("section--active"),learnMore("close"),"home"===e?s.addClass("video--playing"):i.addClass("video--playing"),$currPlaying=$(".video--playing"),o=$currPlaying.parent(),o.addClass("section--active");var t=0,r=0,n=!1,l=setInterval(function(){r=$currPlaying[0].currentTime;var e=.02;!n&&r<t+.02&&!$currPlaying[0].paused&&$currPlaying.hasClass("video--scene")&&(n=!0,progressBar("pause"),$loader.fadeIn()),n&&r>t+.02&&!$currPlaying[0].paused&&$currPlaying.hasClass("video--scene")&&(n=!1,progressBar("resume"),$loader.fadeOut()),$currPlaying.hasClass("video--loop")&&$loader.hide(),t=r},200);setTimeout(function(){$currPlaying[0].play(),progressBar("play")},200)}function skipVideo(){var e=$currPlaying.next();$currPlaying[0].pause(),$currPlaying.removeClass("video--playing"),progressBar("stop"),e[0].play(),e.addClass("video--playing"),$currPlaying=e,$pauseBtn.removeClass("play-pause--paused").addClass("play-pause--playing")}function replayVideo(){var e=$currPlaying.prev();$currPlaying[0].pause(),$currPlaying.removeClass("video--playing"),e[0].currentTime=0,e.addClass("video--playing"),$currPlaying=e,setTimeout(function(){progressBar("replay"),e[0].play()},200)}function nextVideo(){var e=$currPlaying.parent().next("section"),a=e[0].classList[1],i=a,s=a+" | AetnaCare℠",o=a;playVideo(a),history.pushState(i,s,o)}var $win=$(window),$body=$("body"),$desktop=$(".desktop"),$mobile=$(".mobile"),loopUrl="_lib/video/loop-",videoUrl="_lib/video/video-",$header=$("header"),$logo=$(".logo"),$footer=$("footer"),$loader=$(".loader"),$navItem=$footer.find(".section-nav"),$mainNav=$(".section-nav"),$navBtn=$mainNav.find("li"),$homeBtn=$(".logo"),$menuBtn=$(".btn--menu"),$startBtn=$(".btn--start"),$skipBtn=$(".btn--skip"),$pauseBtn=$(".play-pause"),$textBtn=$(".btn--text"),$muteBtn=$(".volume"),$replayBtn=$(".replay"),$nextBtn=$(".next"),$restartBtn=$(".btn--restart"),$menu=$(".main-menu ul"),$overlay=$(".nav-overlay"),$menuItems=$(".main-menu ul").children(),learnTL=new TimelineMax,$currPlaying=$(".video--playing"),$navActive=$navItem.find(".nav-active"),$progBar=$(".progress:not(.progress--empty)"),$progActive=$navActive.find($progBar),progressTL=new TimelineMax({paused:!0}),storyTL=new TimelineMax({paused:!0}),isMobile={detectMobile:function e(){return navigator.userAgent.match(/Mobi/i)}};$('[tabindex="0"]').on("keydown",function(e){var a=$(this);13===e.keyCode&&a.trigger("click")});var sections={home:{title:"Home",video:"",loop:loopUrl+0+".mp4",selector:$("section.home"),duration:31},journey:{title:"Journey",video:videoUrl+1+".mp4",loop:loopUrl+1+".mp4",selector:$("section.journey"),duration:22},identify:{title:"Identify",video:videoUrl+2+".mp4",loop:loopUrl+2+".mp4",selector:$("section.identify"),duration:31},connect:{title:"Connect",video:videoUrl+3+".mp4",loop:loopUrl+3+".mp4",selector:$("section.connect"),duration:26},guide:{title:"Guide",video:videoUrl+4+".mp4",loop:loopUrl+4+".mp4",selector:$("section.guide"),duration:21},support:{title:"Support",video:videoUrl+5+".mp4",loop:loopUrl+5+".mp4",selector:$("section.support"),duration:31},sustain:{title:"Sustain",video:videoUrl+6+".mp4",loop:loopUrl+6+".mp4",selector:$("section.sustain"),duration:35}},videoProgress=setInterval(function(){var e=parseInt($currPlaying[0].currentTime,10),a=parseInt($currPlaying[0].duration,10),i=$currPlaying.data("video");if(e>0&&!$currPlaying[0].paused&&!$currPlaying[0].ended&&a-e==10)switch(storyText("restart"),i){case"journey":setVideoSrc("identify");break;case"identify":setVideoSrc("connect");break;case"connect":setVideoSrc("guide");break;case"guide":setVideoSrc("support");break;case"Support":setVideoSrc("sustain");break}$currPlaying.hasClass("video--scene")&&$currPlaying[0].ended&&($currPlaying[0].pause(),$currPlaying.removeClass("video--playing"),$currPlaying.next(".video--loop").addClass("video--playing"),$currPlaying=$(".video--playing"),$currPlaying[0].play(),learnMore("open"))},1e3),AetnaCare={init:function e(){var a=document.title,i="/",s="home";history.replaceState("home",a,"/"),$header.css("opacity",1),$(".home").addClass("section--active"),$navBtn.add($homeBtn).on("click",function(e){var a=$(e.target),i=$(this),s=a[0].localName;"span"!==s&&"div"!==s||(a=a.parent());var o=a.data("url"),t=o,r=sections[o].title;o!==$currPlaying.data("video")&&(playVideo(t),learnMore("close"),"home"===o&&($footer.add($skipBtn).css({opacity:0,visibility:"hidden"}),$logo.first().css({opacity:1,visibility:"visible"}),$logo.last().css({opacity:0,visibility:"hidden"}),$navActive.removeClass("nav-active"),$progActive.removeClass("progress--active")),"section-nav"===a[0].parentElement.className&&($navActive.removeClass("nav-active"),$progActive.removeClass("progress--active"),i.addClass("nav-active"),$navActive=$navItem.find(".nav-active"),$progActive=$navActive.find(".progress:not(.progress--empty)"),$progActive.addClass("progress--active")),progressTL.progress(0).clear(),progressTL=new TimelineMax({paused:!0}),$pauseBtn.removeClass("play-pause--paused").addClass("play-pause--playing"),history.pushState(t,r,o))}),$startBtn.on("click",function(){var e=$footer.find(".section-nav li:first-of-type"),a=e.find(".progress:not(.progress--empty)");nextVideo(),$logo.first().css({opacity:0,visibility:"hidden"}),$logo.last().css({opacity:1,visibility:"visible"}),e.addClass("nav-active"),$navActive=$navItem.find(".nav-active"),$progActive=$navActive.find(".progress:not(.progress--empty)"),a.addClass("progress--active"),learnMore("close"),progressTL.progress(0).clear(),progressTL=new TimelineMax({paused:!0}),$footer.add($skipBtn).css({opacity:1,visibility:"visible"})}),$textBtn.on("click",function(){$body.addClass("mobile-active"),$desktop.fadeOut(),$mobile.fadeIn()}),$menuBtn.on("click",function(){$(this).toggleClass("btn--close"),$menu.toggleClass("menu-open"),$menuItems.removeClass("menu-active"),progressBar("resume"),$currPlaying[0].play(),!$menu.hasClass("menu-open")&&$overlay.hasClass("nav-overlay--open")&&($overlay.fadeOut().removeClass("nav-overlay--open"),$overlay.children().fadeOut())}),$menuItems.on("click",function(e){var a=$(e.target);"li"===a[0].localName&&(a=a.children());var i=a[0].dataset.url,s=a.parent();$overlay.fadeIn().addClass("nav-overlay--open"),progressBar("pause"),$currPlaying[0].pause(),"vision"===i?(s.addClass("menu-active").siblings().removeClass("menu-active"),$(".vision").fadeIn(),$(".disclaimer, .contact").fadeOut()):"disclaimer"===i?(s.addClass("menu-active").siblings().removeClass("menu-active"),$(".disclaimer").fadeIn(),$(".vision, .contact").fadeOut()):"contact"===i&&(s.addClass("menu-active").siblings().removeClass("menu-active"),$(".contact").fadeIn(),$(".disclaimer, .vision").fadeOut())}),$skipBtn.on("click",function(){skipVideo(),learnMore("open")}),$pauseBtn.on("click",function(e){var a=$(this);a.hasClass("play-pause--playing")&&$currPlaying.hasClass("video--scene")?($currPlaying[0].pause(),progressBar("pause"),$pauseBtn.removeClass("play-pause--playing").addClass("play-pause--paused")):a.hasClass("play-pause--paused")&&$currPlaying.hasClass("video--scene")?($currPlaying[0].play(),progressBar("resume"),$pauseBtn.removeClass("play-pause--paused").addClass("play-pause--playing")):e.preventDefault()}),$muteBtn.on("click",function(){var e=$(this);!1===$currPlaying.prop("muted")?($currPlaying.prop("muted",!0),e.addClass("volume--muted")):($currPlaying.prop("muted",!1),e.removeClass("volume--muted"))}),$replayBtn.on("click",function(){replayVideo(),learnMore("close")}),$nextBtn.on("click",function(){nextVideo(),learnMore("close"),$navActive.removeClass("nav-active"),$progActive.removeClass("progress--active"),$navActive.next().addClass("nav-active"),$navActive=$navItem.find(".nav-active"),$progActive=$navActive.find(".progress:not(.progress--empty)"),$progActive.addClass("progress--active"),progressTL.progress(0).clear(),progressTL=new TimelineMax({paused:!0})}),$restartBtn.on("click",function(){var e="journey",a="Journey | AetnaCare℠",i="journey",s=$footer.find(".section-nav li:first-of-type");playVideo("journey"),learnMore("close"),$navActive.removeClass("nav-active"),$progActive.removeClass("progress--active"),s.addClass("nav-active"),$navActive=$navItem.find(".nav-active"),$progActive=$navActive.find(".progress:not(.progress--empty)"),$progActive.addClass("progress--active"),progressTL.progress(0).clear(),progressTL=new TimelineMax({paused:!0}),history.pushState("journey","Journey | AetnaCare℠",e)}),$("#mobile-burger").on("click",function(){var e=$("#mobile-menu .menu"),a=e.find(".mobile-link");e.hasClass("is-active")?(e.removeClass("is-active"),$(".mobile-burger").removeClass("is-inactive"),$(".mobile-close").addClass("is-inactive"),$("#mobile-menu .menu").fadeOut()):(e.addClass("is-active"),a.attr("tabindex","").attr("aria-hidden","false"),$(".mobile-burger").addClass("is-inactive"),$(".mobile-close").removeClass("is-inactive"),$("#mobile-menu .menu").fadeIn())}),$(".menu > .absolute-center > a").on("click",function(){$("#mobile-burger").trigger("click")}),$(".menu > .absolute-center > a").on("mouseover",function(){$(this).addClass("is-active"),$(".menu > .absolute-center > a").not(this).addClass("is-not-active")}).mouseout(function(){$(this).removeClass("is-active"),$(".menu > .absolute-center > a").not(this).removeClass("is-not-active")}),$("#play-vision-btn").on("click",function(){$("#vision-video").css({opacity:1,display:"block",zIndex:20}).addClass("is-active"),$("#mobile-intro .hero").addClass("video-active"),$("#vision-video")[0].play(),$("#vision-video")[0].addEventListener("pause",function(){$("#mobile-intro .hero").removeClass("video-active"),$("#vision-video").css({opacity:0,display:"none",zIndex:-20}).removeClass("is-active")})})}};$(function(){AetnaCare.init()}),$win.on("load resize",function(){!isMobile.detectMobile()&&$win.width()>=1024&&!$body.hasClass("mobile-active")?($body.removeClass("mobile-active"),$desktop.fadeIn(),$mobile.fadeOut()):($body.addClass("mobile-active"),$desktop.fadeOut(),$mobile.fadeIn())}),window.addEventListener("popstate",function(e){if(playVideo(e.state),learnMore("close"),"/home"===window.location.pathname||"/"===window.location.pathname)$footer.add($skipBtn).css({opacity:0,visibility:"hidden"}),$logo.first().css({opacity:1,visibility:"visible"}),$logo.last().css({opacity:0,visibility:"hidden"});else{var a=$navActive[0].baseURI.split("/")[3],i=$navActive.parent().find('[data-url="'+a+'"]');$navActive.removeClass("nav-active"),$progActive.removeClass("progress--active"),i.addClass("nav-active"),$navActive=$navItem.find(".nav-active"),$progActive=$navActive.find(".progress:not(.progress--empty)"),$progActive.addClass("progress--active"),setTimeout(function(){progressBar("play")},200),$footer.add($skipBtn).css({opacity:1,visibility:"visible"}),$logo.first().css({opacity:0,visibility:"hidden"}),$logo.last().css({opacity:1,visibility:"visible"})}progressTL.progress(0).clear(),progressTL=new TimelineMax({paused:!0})});